<html>
<head>
<title>Python Flask Upload and display image</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />        
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
</head>
<body>
<p><h1 align="center">Python Flask Upload and display image</h1></p>
<div class="container">
<div class="row">
    <h2>Select a file to upload</h2>
    <p>
        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <ul>
            {% for message in messages %}
              <li>{{ message }}</li>
            {% endfor %}
            </ul>
          {% endif %}
        {% endwith %}
    </p>
    {% if meals %}
    <div id="meals"></div>

    <script>
        const meals = {{ meals|tojson }};
    
        const container = document.getElementById("meals");
    
        meals.forEach(meal => {
            const mealName = meal['meal'];
            const mealItems = meal['Ingredients'];

            console.log(mealName);
            console.log(mealItems);
    
            // Create and append meal name
            const mealTitle = document.createElement("h3");
            mealTitle.textContent = mealName;
            container.appendChild(mealTitle);
    
            // Create a list for items
            const ul = document.createElement("ul");
            for (const item in mealItems) {
                const li = document.createElement("li");
                li.textContent = `${item}: ${mealItems[item]}`;
                ul.appendChild(li);
            }
            container.appendChild(ul);
        });
    </script>
    {% endif %}
    <form method="post" action="/" enctype="multipart/form-data">
        <dl>
            <p>
                <input type="file" name="file" class="form-control" autocomplete="off" required>
            </p>
        </dl>
        <p>
            <input type="submit" value="Submit" class="btn btn-info">
        </p>
    </form>
</div>
</div>
</body>
</html>